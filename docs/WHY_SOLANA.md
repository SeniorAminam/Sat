<!--
Project: Solana Token Workshop (SAT)
File: docs/WHY_SOLANA.md
Author: Amin Davodian (Mohammadamin Davodian)
Website: https://senioramin.com
LinkedIn: https://linkedin.com/in/SudoAmin
GitHub: https://github.com/SeniorAminam
Created: 2025-12-27

Purpose: In-depth explanation of why Solana, Anchor, and Token-2022 are chosen for this workshop.
Developed by Amin Davodian
-->

<div align="center">

# 🧠 چرا سولانا؟ چرا Anchor؟ چرا Token-2022؟

### 🎓 درک عمیق انتخاب‌های فنی

</div>

---

## 📋 فهرست

1. [🌐 چرا سولانا؟](#-چرا-سولانا)
2. [⚓ چرا Anchor؟](#-چرا-anchor)
3. [🆕 چرا Token-2022؟](#-چرا-token-2022)
4. [🔄 مقایسه نهایی](#-مقایسه-نهایی)

---

## 🌐 چرا سولانا؟

### 📊 مقایسه آماری شبکه‌ها

<div align="center">

```
╔═══════════════════════════════════════════════════════════════════════════════╗
║                        مقایسه شبکه‌های بلاک‌چین                                ║
╠═══════════════╦═══════════════╦═══════════════╦═══════════════╦═══════════════╣
║     معیار     ║   Ethereum    ║      BSC      ║   Polygon     ║    Solana     ║
╠═══════════════╬═══════════════╬═══════════════╬═══════════════╬═══════════════╣
║  سرعت (TPS)   ║     ~15       ║     ~100      ║    ~7,000     ║   ~65,000+    ║
║               ║               ║               ║               ║      ⚡       ║
╠═══════════════╬═══════════════╬═══════════════╬═══════════════╬═══════════════╣
║    کارمزد     ║   $2 - $50+   ║  $0.1 - $1    ║  $0.01-$0.1   ║   $0.00025    ║
║               ║      😢       ║               ║               ║      🎉       ║
╠═══════════════╬═══════════════╬═══════════════╬═══════════════╬═══════════════╣
║   Finality    ║   ~13 دقیقه   ║   ~3 دقیقه    ║   ~2 دقیقه    ║   ~400ms      ║
║               ║               ║               ║               ║      🚀       ║
╠═══════════════╬═══════════════╬═══════════════╬═══════════════╬═══════════════╣
║  زبان برنامه  ║   Solidity    ║   Solidity    ║   Solidity    ║    Rust 🦀    ║
╠═══════════════╬═══════════════╬═══════════════╬═══════════════╬═══════════════╣
║   مکانیزم     ║     PoS       ║     PoSA      ║     PoS       ║  PoH + PoS    ║
╚═══════════════╩═══════════════╩═══════════════╩═══════════════╩═══════════════╝
```

</div>

---

### 🔬 Proof of History — نوآوری سولانا

<div align="center">

```
┌─────────────────────────────────────────────────────────────────────────────┐
│                        PROOF OF HISTORY (PoH)                                │
├─────────────────────────────────────────────────────────────────────────────┤
│                                                                              │
│   مشکل سنتی بلاک‌چین:                                                        │
│   ┌────────┐      ┌────────┐      ┌────────┐                               │
│   │ Node A │ ───? │ Node B │ ───? │ Node C │   ← همه باید زمان رو توافق کنن │
│   └────────┘      └────────┘      └────────┘                               │
│                                                                              │
│   راه‌حل سولانا:                                                             │
│   ┌─────────────────────────────────────────────────────────────────┐       │
│   │  Hash₁ → Hash₂ → Hash₃ → Hash₄ → Hash₅ → ...                    │       │
│   │    ↓        ↓        ↓        ↓        ↓                        │       │
│   │   T=1     T=2      T=3      T=4      T=5    ← ساعت رمزنگاری‌شده │       │
│   └─────────────────────────────────────────────────────────────────┘       │
│                                                                              │
│   نتیجه: بدون نیاز به توافق روی زمان = سرعت بیشتر! 🚀                       │
│                                                                              │
└─────────────────────────────────────────────────────────────────────────────┘
```

</div>

---

### 🏛️ مدل Account سولانا

در سولانا، همه‌چیز یک **Account** است:

```
┌─────────────────────────────────────────────────────────────────┐
│                    SOLANA ACCOUNT MODEL                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  ┌─────────────────┐                                            │
│  │    Account      │                                            │
│  ├─────────────────┤                                            │
│  │ lamports: u64   │ ← موجودی (به واحد lamport)                 │
│  │ data: [u8]      │ ← داده‌های دلخواه                           │
│  │ owner: Pubkey   │ ← برنامه‌ی مالک                             │
│  │ executable: bool│ ← آیا برنامه است؟                          │
│  │ rent_epoch: u64 │ ← اجاره‌ی فضا                               │
│  └─────────────────┘                                            │
│                                                                  │
│  مثال‌ها:                                                        │
│  • کیف پول شما = یک Account                                     │
│  • توکن شما = یک Account                                        │
│  • برنامه شما = یک Account                                      │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

## ⚓ چرا Anchor؟

### 🔴 بدون Anchor (Rust خام):

```rust
// فقط برای validate کردن یک account:
let account_info = next_account_info(account_info_iter)?;

if account_info.owner != &spl_token::id() {
    return Err(ProgramError::InvalidAccountData);
}

if !account_info.is_writable {
    return Err(ProgramError::InvalidAccountData);
}

let mint = Mint::unpack(&account_info.data.borrow())?;

if mint.is_initialized {
    return Err(TokenError::AlreadyInUse.into());
}

// ... 50+ خط کد برای هر account! 😱
```

### 🟢 با Anchor:

```rust
#[derive(Accounts)]
pub struct CreateToken<'info> {
    #[account(
        init,
        payer = payer,
        mint::decimals = 9,
        mint::authority = payer,
    )]
    pub mint: Account<'info, Mint>,  // همین! ✨

    #[account(mut)]
    pub payer: Signer<'info>,

    pub system_program: Program<'info, System>,
}
```

---

### 📊 مقایسه Anchor vs Raw

<div align="center">

| معیار | Rust خام | Anchor |
|---|:---:|:---:|
| **خطوط کد** | ~500 | ~100 |
| **امنیت** | دستی | خودکار ✅ |
| **تست** | سخت | آسان |
| **IDL** | ندارد | خودکار ✅ |
| **یادگیری** | سخت | متوسط |

</div>

---

### 🛡️ امنیت خودکار Anchor

```rust
// Anchor خودکار این‌ها را چک می‌کند:
// ✅ Owner validation
// ✅ Signer validation  
// ✅ Rent exemption
// ✅ Account initialization
// ✅ PDA derivation
// ✅ Constraint checking

#[account(
    init,                           // باید initialize نشده باشد
    payer = payer,                  // payer باید signer باشد
    seeds = [b"token"],             // آدرس از seeds محاسبه می‌شود
    bump,                           // bump خودکار
    space = 8 + Mint::LEN,          // فضای کافی
)]
pub mint: Account<'info, Mint>,
```

---

## 🆕 چرا Token-2022؟

### 📜 تاریخچه

```
┌─────────────────────────────────────────────────────────────────┐
│                    SOLANA TOKEN PROGRAMS                         │
├─────────────────────────────────────────────────────────────────┤
│                                                                  │
│  2020 ──────────────────────────────────────────── 2024          │
│   │                                                    │         │
│   │  ┌──────────────────┐    ┌──────────────────────┐  │         │
│   └─▶│  Token Program   │───▶│  Token-2022          │◀─┘         │
│      │  (Legacy)        │    │  (Extensions)        │           │
│      └──────────────────┘    └──────────────────────┘           │
│              ↓                         ↓                         │
│      • ساده                   • امکانات پیشرفته                  │
│      • محدود                  • انعطاف‌پذیر                      │
│      • USDC, RAY              • پروژه‌های جدید                   │
│                                                                  │
└─────────────────────────────────────────────────────────────────┘
```

---

### ✨ امکانات Token-2022

<div align="center">

| Extension | توضیح | کاربرد |
|---|---|---|
| 💸 **Transfer Fees** | کارمزد خودکار روی هر انتقال | توکن‌های با درآمد |
| 📈 **Interest Bearing** | سود خودکار | Staking |
| 🔒 **Confidential** | انتقال مخفی | حریم خصوصی |
| 👤 **Permanent Delegate** | نماینده دائمی | Stablecoin ها |
| 🚫 **Non-Transferable** | غیرقابل انتقال | Soul-bound tokens |
| 📝 **Metadata** | متادیتای on-chain | نام و لوگو |
| ✍️ **Memo Required** | یادداشت اجباری | Compliance |

</div>

---

### 🆚 مقایسه نهایی

```
┌─────────────────────────────────────────────────────────────────────────┐
│                                                                          │
│   Token Program (قدیمی)              Token-2022 (جدید)                  │
│   ══════════════════════             ═══════════════════════════════    │
│                                                                          │
│   ┌────────────────┐                 ┌────────────────────────────┐     │
│   │                │                 │  ┌──────┐ ┌──────┐ ┌──────┐│     │
│   │   Core Token   │                 │  │ Core │+│ Ext1 │+│ Ext2 ││     │
│   │    Features    │                 │  └──────┘ └──────┘ └──────┘│     │
│   │                │                 │                            │     │
│   └────────────────┘                 └────────────────────────────┘     │
│                                                                          │
│   • Transfer ✅                      • Transfer ✅                       │
│   • Mint ✅                          • Mint ✅                           │
│   • Burn ✅                          • Burn ✅                           │
│   • Freeze ✅                        • Freeze ✅                         │
│   • کارمزد ❌                        • کارمزد ✅                         │
│   • سود ❌                           • سود ✅                            │
│   • متادیتا on-chain ❌              • متادیتا on-chain ✅               │
│                                                                          │
└─────────────────────────────────────────────────────────────────────────┘
```

---

## 🎯 نتیجه‌گیری

<div align="center">

### ✅ انتخاب نهایی

| تکنولوژی | دلیل |
|---|---|
| **Solana** | سریع‌ترین + ارزان‌ترین |
| **Anchor** | امن‌ترین + ساده‌ترین |
| **Token-2022** | جدیدترین + کامل‌ترین |
| **Rust** | قوی‌ترین + امن‌ترین |

---

> 💡 **نکته**: برای پروژه‌های جدید، همیشه از **Token-2022** استفاده کنید!

</div>

---

<div align="center">

**📚 ادامه مطالعه:**

[← بازگشت به README](../README.md) | [ساخت توکن با CLI →](01-token-2022-cli.md)

---

**Built with ❤️ by [Amin Davodian](https://senioramin.com)**

</div>
